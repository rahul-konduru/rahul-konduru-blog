<!DOCTYPE html>
<html lang="en-us">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Writing a Custom Kafka Health Indicator in Spring Boot - Rahul Konduru Blog</title><meta name="Description" content="This is my cool site"><meta property="og:url" content="http://localhost:1313/posts/custom-kafka-health-indicator/">
  <meta property="og:site_name" content="Rahul Konduru Blog">
  <meta property="og:title" content="Writing a Custom Kafka Health Indicator in Spring Boot">
  <meta property="og:description" content="Learn how to create a custom Kafka health indicator in Spring Boot to improve your microservice resilience. Enhance Kubernetes monitoring by verifying both Kafka producer and consumer functionality for accurate health checks.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-09-04T15:06:01-05:00">
    <meta property="article:modified_time" content="2025-09-04T15:06:01-05:00">
    <meta property="article:tag" content="Spring Boot">
    <meta property="article:tag" content="Kafka">
    <meta property="article:tag" content="Actuator">
    <meta property="article:tag" content="Health Check">
    <meta property="article:tag" content="Kubernetes">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Writing a Custom Kafka Health Indicator in Spring Boot">
  <meta name="twitter:description" content="Learn how to create a custom Kafka health indicator in Spring Boot to improve your microservice resilience. Enhance Kubernetes monitoring by verifying both Kafka producer and consumer functionality for accurate health checks.">
<meta name="application-name" content="My cool site">
<meta name="apple-mobile-web-app-title" content="My cool site"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://localhost:1313/posts/custom-kafka-health-indicator/" /><link rel="prev" href="http://localhost:1313/posts/welcome/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="/lib/fontawesome-free/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" href="/lib/animate/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Writing a Custom Kafka Health Indicator in Spring Boot",
        "inLanguage": "en-us",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/localhost:1313\/posts\/custom-kafka-health-indicator\/"
        },"genre": "posts","keywords": "Spring Boot, Kafka, Actuator, Health Check, Kubernetes","wordcount":  640 ,
        "url": "http:\/\/localhost:1313\/posts\/custom-kafka-health-indicator\/","datePublished": "2025-09-04T15:06:01-05:00","dateModified": "2025-09-04T15:06:01-05:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "xxxx"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Rahul Konduru Blog">My cool site</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Rahul Konduru Blog">My cool site</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Writing a Custom Kafka Health Indicator in Spring Boot</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>xxxx</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2025-09-04">2025-09-04</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;640 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;4 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#why-do-we-need-health-indicators">Why Do We Need Health Indicators?</a></li>
    <li><a href="#existing-approaches">Existing Approaches</a></li>
    <li><a href="#a-custom-kafka-health-indicator">A Custom Kafka Health Indicator</a></li>
    <li><a href="#coding-the-health-indicator">Coding the Health Indicator</a></li>
    <li><a href="#wrapping-up">Wrapping Up</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>When building resilient microservices, <strong>health monitoring</strong> plays a critical role. Spring Boot provides a powerful tool for this: <strong>Spring Boot Actuator</strong>, which exposes health endpoints that integrate seamlessly with orchestration platforms like Kubernetes.</p>
<p>However, one limitation is that Spring Boot Actuator does not provide a built-in <strong>Kafka health indicator</strong>, unlike the ones available for databases, Redis, and other services. Fortunately, Spring Boot allows us to define <strong>custom health indicators</strong>, and in this post, we’ll explore how to create one for <strong>Kafka</strong>.</p>
<hr>
<h2 id="why-do-we-need-health-indicators">Why Do We Need Health Indicators?</h2>
<p>Kubernetes relies on <strong>probes</strong> to detect the health of applications running in pods. These probes call Spring Boot Actuator health endpoints and help manage the lifecycle of applications in a cluster.</p>
<p>Spring Boot Actuator health checks are particularly useful for Kubernetes in supporting three types of probes:</p>
<ul>
<li><strong>Startup Probe</strong>: Verifies that the application has started successfully.</li>
<li><strong>Liveness Probe</strong>: Ensures the application is still alive and running. If it fails, Kubernetes restarts the container.</li>
<li><strong>Readiness Probe</strong>: Checks whether the application is ready to handle traffic. If it fails, Kubernetes removes the pod from the service load balancer until it recovers.</li>
</ul>
<p>Without proper health indicators for dependencies like Kafka, Kubernetes may falsely assume the application is healthy even when it cannot produce or consume messages. This can lead to degraded system performance or downtime.</p>
<hr>
<h2 id="existing-approaches">Existing Approaches</h2>
<p>Many implementations online use <strong>KafkaAdmin</strong> to verify connectivity to a Kafka broker. This approach attempts broker-level operations to confirm basic Kafka connectivity.</p>
<p>However, broker connectivity alone does not guarantee that both the <strong>producer</strong> and <strong>consumer</strong> sides of your application can function correctly. That’s why we’ll take a different approach — extending health indicators to verify <strong>producer</strong> and <strong>consumer workflows</strong>.</p>
<hr>
<h2 id="a-custom-kafka-health-indicator">A Custom Kafka Health Indicator</h2>
<p>In production, it’s important to verify:</p>
<ol>
<li><strong>Producer Health</strong> – The application should be able to send messages to a Kafka topic.</li>
<li><strong>Consumer Health</strong> – The application should be able to consume messages from the topic.</li>
</ol>
<p>Depending on your use case, you may implement either or both. For example:</p>
<ul>
<li>A service responsible only for publishing messages may implement a <strong>producer health check</strong>.</li>
<li>A service that primarily processes Kafka messages would benefit more from a <strong>consumer health check</strong>.</li>
<li>In some cases, you may want to combine both for stronger validation.</li>
</ul>
<hr>
<h2 id="coding-the-health-indicator">Coding the Health Indicator</h2>
<p>Spring Boot provides a streamlined mechanism for defining custom health indicators by either implementing the <a href="https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/actuate/health/HealthIndicator.html" target="_blank" rel="noopener noreffer "><code>HealthIndicator</code></a> interface or extending the <a href="https://docs.spring.io/spring-boot/api/java/org/springframework/boot/actuate/health/AbstractHealthIndicator.html" target="_blank" rel="noopener noreffer "><code>AbstractHealthIndicator</code></a> base class. For enhanced simplicity and consistency, it is recommended to extend <code>AbstractHealthIndicator</code>, as this abstract class encapsulates the construction of the <code>Health</code> response and offers built-in exception handling. This approach enables developers to focus exclusively on implementing the specific health check logic relevant to their component or subsystem.</p>
<p>A custom Kafka health indicator might:</p>
<ul>
<li>Attempt to send a lightweight message via the <strong>Kafka producer</strong> and check acknowledgment.</li>
<li>Attempt to poll a Kafka topic with the <strong>Kafka consumer</strong> to ensure messages can be read.</li>
</ul>
<p>This provides a much more <strong>accurate reflection</strong> of the application’s actual Kafka integration health.</p>
<p>Let&rsquo;s start by defining a class called <code>KafkaHealthIndicator</code> and extending with <code>AbstractHealthIndicator</code>. Mark this class with <code>@Component</code> annotation such that spring can create a bean for this class. Extending <code>AbstractHealthIndicator</code> will force us to override <code>doHealthCheck</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a6e22e">@Component</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">KafkaHealthIndicator</span> <span style="color:#66d9ef">extends</span> AbstractHealthIndicator {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">doHealthCheck</span>(Health.<span style="color:#a6e22e">Builder</span> builder) <span style="color:#66d9ef">throws</span> Exception {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//kafka health check logic</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="wrapping-up">Wrapping Up</h2>
<p>Spring Boot’s extensibility lets us go beyond the built-in health checks and create <strong>Kafka-specific health indicators</strong>. These improve the reliability of your service by allowing Kubernetes (or any orchestrator) to make informed decisions about your application’s state.</p>
<p>By verifying both Kafka producer and consumer functionality, your health endpoints more accurately represent the application’s readiness to handle traffic.</p>
<p>When deploying a Spring Boot service that depends on Kafka, avoid relying solely on broker connectivity checks; instead, implement a robust custom health indicator.</p>
<p><strong>Let’s get coding! 🚀</strong></p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2025-09-04</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="http://localhost:1313/posts/custom-kafka-health-indicator/" data-title="Writing a Custom Kafka Health Indicator in Spring Boot" data-hashtags="Spring Boot,Kafka,Actuator,Health Check,Kubernetes"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="http://localhost:1313/posts/custom-kafka-health-indicator/" data-hashtag="Spring Boot"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="http://localhost:1313/posts/custom-kafka-health-indicator/" data-title="Writing a Custom Kafka Health Indicator in Spring Boot"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="http://localhost:1313/posts/custom-kafka-health-indicator/" data-title="Writing a Custom Kafka Health Indicator in Spring Boot"><i data-svg-src="/lib/simple-icons/icons/line.min.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="http://localhost:1313/posts/custom-kafka-health-indicator/" data-title="Writing a Custom Kafka Health Indicator in Spring Boot"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/spring-boot/">Spring Boot</a>,&nbsp;<a href="/tags/kafka/">Kafka</a>,&nbsp;<a href="/tags/actuator/">Actuator</a>,&nbsp;<a href="/tags/health-check/">Health Check</a>,&nbsp;<a href="/tags/kubernetes/">Kubernetes</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/welcome/" class="prev" rel="prev" title="Welcome"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>Welcome</a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.149.0">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.3.0"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2022 - 2025</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">xxxx</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
